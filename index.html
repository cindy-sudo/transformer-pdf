
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>變壓器 PDF 工具</title>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.1/dist/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; }
    </style>
</head>
<body>
    <h2>圖片上傳 ➝ OCR ➝ PDF</h2>
    <input type="file" id="imageInput" accept="image/*"><br><br>
    <button onclick="processImage()">開始辨識與產出 PDF</button>

    <h3>辨識結果預覽：</h3>
    <div id="output"></div>

    <script>
        async function processImage() {
            const file = document.getElementById('imageInput').files[0];
            if (!file) return alert("請先上傳圖片！");
            const reader = new FileReader();
            reader.onload = async () => {
                const { data: { text } } = await Tesseract.recognize(reader.result, 'chi_tra');
                document.getElementById('output').innerText = text;

                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF();
                pdf.setFont("Helvetica");
                pdf.setFontSize(12);
                const lines = pdf.splitTextToSize(text, 180);
                pdf.text(lines, 10, 10);
                pdf.save("result.pdf");
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
